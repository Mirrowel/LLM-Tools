[
  {
    "id": "coding_sql_join",
    "subcategory": "queries",
    "prompt": "Write a SQL query that joins two tables: `users` (columns: id, name, email) and `orders` (columns: id, user_id, product, amount). The query should return all users who have placed orders, along with their total order amount. Include user name and total amount.",
    "system_prompt": "You are an expert in SQL and database queries.",
    "expected_output": null,
    "evaluation_type": "llm_judge",
    "evaluation_criteria": "The query should use JOIN and GROUP BY correctly to calculate total amounts per user.",
    "tags": ["sql", "joins", "aggregation", "medium"],
    "metadata": {
      "difficulty": "medium",
      "estimated_tokens": 200
    }
  },
  {
    "id": "coding_sql_subquery",
    "subcategory": "queries",
    "prompt": "Write a SQL query to find all employees who earn more than the average salary in their department. Tables: `employees` (id, name, department_id, salary) and `departments` (id, name). Return employee name, department name, and salary.",
    "system_prompt": "You are an expert in SQL.",
    "expected_output": null,
    "evaluation_type": "llm_judge",
    "evaluation_criteria": "The query should use a subquery or window function to compare salaries within departments.",
    "tags": ["sql", "subquery", "medium"],
    "metadata": {
      "difficulty": "medium",
      "estimated_tokens": 250
    }
  },
  {
    "id": "coding_sql_top_n",
    "subcategory": "queries",
    "prompt": "Write a SQL query to find the top 3 most expensive products in each category. Tables: `products` (id, name, category_id, price) and `categories` (id, name). Return category name, product name, and price, ordered by category and price.",
    "system_prompt": "You are an expert in SQL window functions.",
    "expected_output": null,
    "evaluation_type": "llm_judge",
    "evaluation_criteria": "The query should use ROW_NUMBER() or RANK() window function to get top 3 per category.",
    "tags": ["sql", "window_functions", "hard"],
    "metadata": {
      "difficulty": "hard",
      "estimated_tokens": 300
    }
  }
]
